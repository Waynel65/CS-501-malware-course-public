#include <stdio.h>
#include <vector>
#include <windows.h>


void vectorExample(int size){
    std::vector<BYTE> data;
    for(int i = 0; i < size; i++){
        data.push_back( (BYTE) (i % 0xff));
    }
    for(size_t i = 0; i < data.size(); i++){
        printf(" %02x ", data[i]);
    }
    printf("\n");
}

void WriteFileExample(int size){
    std::vector<BYTE> data;
    for(int i = 0; i < size; i++){
        data.push_back( (BYTE) (i % 0xff));
    }
    HANDLE hFile = ::CreateFileA(
        "outfile.txt", 
        GENERIC_READ | GENERIC_WRITE, 
        0,
        NULL, 
        CREATE_ALWAYS,
        FILE_ATTRIBUTE_NORMAL,
        NULL
        );
    if( hFile == INVALID_HANDLE_VALUE){
        printf("Failed to open file: %d\n", ::GetLastError());
        return ;
    }
    DWORD dwBytesWritten = 0;
    DWORD dwFileSize = (DWORD) data.size(); // just assume value < MAX_DWORD
    BOOL bResult = ::WriteFile(hFile, data.data(), data.size() , &dwBytesWritten, NULL);
    if(!bResult){
        printf("Failed to write File %d\n", ::GetLastError());
    }
    
    printf("Wrote %d Bytes!\n", dwBytesWritten);
    ::CloseHandle(hFile);
}


int main(int argc, char* argv[]){
    int size = 100;
    if (argc ==2){
         size = atoi(argv[1]);
    } 
    vectorExample(size);
    //WriteFileExample();

    return 0;
}